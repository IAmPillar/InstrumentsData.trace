//
//  GZQueue.m
//  HanvonKeyboard
//
//  Created by hanvon on 2017/12/28.
//  Copyright © 2017年 hanvon. All rights reserved.
//

#import "GZQueue.h"


@interface GZQueue()
@property (nonatomic, strong) NSOperationQueue *operationQueue; //线程队列
@end


static GZQueue *share;
static dispatch_once_t onceToken;

@implementation GZQueue
+ (id)shareQueue {
    dispatch_once(&onceToken, ^{
        share = [[self alloc] init];
    });

    return share;
}
- (id)init {
    self = [super init];
    if (self) {
        self.operationQueue = [[NSOperationQueue alloc] init] ;
        self.operationQueue.maxConcurrentOperationCount = 1; //设置最大并发线程数
    }
    return self;
}

- (NSOperationQueue*)getOperationQueue {
    return self.operationQueue;
}

- (void)stop {
    [self.operationQueue setSuspended:YES];
}
- (void)start {
    [self.operationQueue setSuspended:NO];
}
- (void)cancel {
    [self.operationQueue cancelAllOperations];
    onceToken = 0;
    share = nil;
}
@end
