//
//  GZSymbolCollectionCell.m
//  HanvonKeyboard
//
//  Created by hanvon on 2017/11/9.
//  Copyright © 2017年 hanvon. All rights reserved.
//

#import "GZSymbolCollectionCell.h"

@implementation GZSymbolCollectionCell
- (instancetype)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self){
        [self creatUIWithFrame:frame];
    }
    return self;
}

- (void)creatUIWithFrame:(CGRect)frame {
    CGRect newBound = self.bounds;
    _titleLabel = [[UILabel alloc] initWithFrame:newBound];
//    _titleLabel.backgroundColor = [UIColor whiteColor];
//    _titleLabel.textColor = [UIColor blackColor];
    _titleLabel.textAlignment = NSTextAlignmentCenter;
    _titleLabel.font = [UIFont systemFontOfSize:18];
    [self addSubview:_titleLabel];
}

- (void)setTitleText:(NSString*)text {
    CGRect newBound = self.bounds;
//    CGFloat width = [[GZPublicMethod sharedPublicMethod] widthForString:text font:[UIFont systemFontOfSize:18] andHeight:newBound.size.height];
//    if (width > newBound.size.width) {
//        _titleLabel.adjustsFontSizeToFitWidth = YES;
//    }
//    _titleLabel.text = text;

    CGSize size = [[GZPublicMethod sharedPublicMethod] getStringSize:text withFont:[UIFont systemFontOfSize:18] wordSpace:@2 lineSpace:3.0];

    CGFloat resultWidth;
    CGFloat collectionCellW = newBound.size.width;
    if (size.width <= collectionCellW) {
        resultWidth = collectionCellW;
    }else if (size.width <= collectionCellW*2 + 1) {
        resultWidth = collectionCellW*2 + 1;
    }else if (size.width <= collectionCellW*3 +2) {
        resultWidth = collectionCellW*3 + 2;
    }else if (size.width <= collectionCellW*4 +3) {
        resultWidth = collectionCellW*4 + 3;
    }else if (size.width <= collectionCellW*5 +4) {
        resultWidth = collectionCellW*5 + 4;
    }else {
        resultWidth = collectionCellW;
    }

    self.titleLabel.frame = CGRectMake(0, 0, resultWidth, newBound.size.height);

    _titleLabel.text = text;
}

@end
